# 온라인 파일 vs 오프라인 파일
## 데이터 구조 완벽 가이드

**작성일**: 2026-01-20  
**분석 파일**: 73개 (오프라인 45개 + 온라인 28개)

---

## 📋 목차

1. [한눈에 보는 비교](#한눈에-보는-비교)
2. [오프라인 파일 구조](#오프라인-파일-구조)
3. [온라인 파일 구조](#온라인-파일-구조)
4. [핵심 차이점](#핵심-차이점)

---

## 한눈에 보는 비교

### 기본 특성

| 구분 | 오프라인 | 온라인 |
|:---|:---|:---|
| 파일명 | Fault_WBVF_*.txt / Fault_GT_*.txt | GT_*.txt / WB_*.txt |
| 크기 | 256 KB / 512 KB | 1 KB |
| 인코딩 | Binary (이진) | Hex-String (텍스트) |
| 레코드 수 | 1,500 ~ 4,500개 | 5 ~ 20개 |
| 데이터 기간 | 수개월 ~ 수년 | 최근 몇 분 ~ 몇 시간 |

### 크기 비교

```
오프라인 WBVF:  256 KB  ████████████████
오프라인 GT:    512 KB  ████████████████████████████████
온라인 GT/WB:     1 KB  █

→ 온라인 파일이 256~512배 작음
```

---

## 오프라인 파일 구조

### 파일 종류

1. **Fault_WBVF**: 구형 시스템 (256 KB)
2. **Fault_GT**: 신형 시스템 (512 KB)

---

### 1. Fault_WBVF (구형)

#### 기본 정보

```
파일명: Fault_WBVF_159064L01.txt
크기: 262,144 bytes (256 KB)
인코딩: Binary
주요 마커: E4, E5, E6
레코드: 1,500 ~ 3,500개
```

#### 파일 구조

```
┌─────────────────────────────────────────┐
│ ConfigDone 헤더 (10 bytes)              │
├─────────────────────────────────────────┤
│ WBVF 식별자 (4 bytes)                   │
├─────────────────────────────────────────┤
│ 설정 데이터 (220 bytes)                 │
├─────────────────────────────────────────┤
│ 인덱스 테이블 (200 bytes)               │
│ - B2, B1, 1, 2, ... 62                  │
├─────────────────────────────────────────┤
│ 레코드 데이터 (255 KB)                  │
│ - 1,500~3,500개 레코드                  │
└─────────────────────────────────────────┘
```

#### ConfigDone 헤더

```
오프셋: 0-9 (10 bytes)
내용: "ConfigDone"
역할: 파일 시작 표시

Hex:
43 6F 6E 66 69 67 44 6F 6E 65
C  o  n  f  i  g  D  o  n  e
```

#### WBVF 식별자

```
오프셋: 42-45 (4 bytes)
내용: "WBVF"
역할: 시스템 종류 표시

Hex:
57 42 56 46
W  B  V  F
```

#### 인덱스 테이블

```
오프셋: 273~ (200 bytes)
내용: B2, B1, 1, 3, 4, ... 62 (총 62개)

Hex:
00 00 42 32 00 42 31 00 31 00 00 33 00
      B  2     B  1     1        3
```

#### 레코드 데이터

```
오프셋: ~7000~ (파일 끝까지)
개수: 1,500~3,500개

레코드 구조:
[레코드타입] [07] [마커] [타임스탬프 6B] [데이터]
   1 byte     1B    1B      6 bytes       가변

예시:
01 07 E6 04 0C 0E 16 35 06 [데이터...]
│  │  │  └──────┬──────┘
│  │  │      타임스탬프
│  │  └─ 마커 (E6)
│  └─── 고정값 (07)
└────── 레코드 타입
```

#### 타임스탬프 형식

```
6 bytes: [YY] [MM] [DD] [HH] [MI] [SS]

예시:
04 0C 0E 16 35 06

해석:
04 → 2004년
0C → 12월 (hex C = 12)
0E → 14일 (hex E = 14)
16 → 22시 (hex 16 = 22)
35 → 53분 (hex 35 = 53)
06 → 6초

결과: 2004-12-14 22:53:06
```

---

### 2. Fault_GT (신형)

#### 기본 정보

```
파일명: Fault_GT_N23261L01.txt
크기: 524,288 bytes (512 KB)
인코딩: Binary
주요 마커: E7, E8, E9
레코드: 3,000 ~ 4,500개
```

#### 파일 구조

```
┌─────────────────────────────────────────┐
│ ConfigDone 헤더 (10 bytes)               │
├─────────────────────────────────────────┤
│ GSP 식별자 (3 bytes)                      │
├─────────────────────────────────────────┤
│ 설정 데이터 (220 bytes)                    │
├─────────────────────────────────────────┤
│ 인덱스 테이블 (200 bytes)                   │
│ - B2, B1, 1, 2, ... 125                 │
├─────────────────────────────────────────┤
│ 레코드 데이터 (510 KB)                      │
│ - 3,000~4,500개 레코드                     │
└─────────────────────────────────────────┘
```

#### GSP 식별자

```
오프셋: 42-44 (3 bytes)
내용: "GSP"
역할: 신형 시스템 표시

Hex:
47 53 50
G  S  P
```

#### WBVF와 차이점

| 항목 | WBVF | Fault_GT |
|:---|:---|:---|
| 크기 | 256 KB | 512 KB |
| 식별자 | WBVF (4B) | GSP (3B) |
| 인덱스 | 62개 | 125개 |
| 레코드 | 1,500~3,500 | 3,000~4,500 |
| 마커 | E4, E5, E6 | E7, E8, E9 |

#### 레코드 구조

```
WBVF와 동일한 형식

[레코드타입] [07] [마커] [타임스탬프] [데이터]

예시:
02 07 E7 18 0A 12 11 01 07 [데이터...]
│  │  │  └──────┬──────┘
│  │  │      2018-10-18 17:01:07
│  │  └─ E7 마커
│  └─── 고정값
└────── 레코드 타입
```

---

### 오프라인 공통 특징

#### Binary 인코딩

```
특징:
- 메모장으로 열면 깨진 문자
- 1 byte = 실제 1 byte (효율적)
- 빠른 처리
- 대용량에 적합

예시:
43 6F 6E 66 69 67 → ConfigDone
```

#### 완전한 구조

```
포함 내용:
✓ 파일 검증 (ConfigDone)
✓ 시스템 식별 (WBVF/GSP)
✓ 설정 정보
✓ 인덱스 테이블
✓ 전체 레코드

목적:
- 독립적 분석 가능
- 시스템 정보 포함
- 데이터 무결성
```

---

## 온라인 파일 구조

### 파일 종류

1. **GT 온라인**: GT 시스템 실시간 데이터
2. **WB 온라인**: WB 시스템 실시간 데이터

**중요**: GT와 WB는 구조가 완전히 동일합니다.

---

### 1. GT 온라인

#### 기본 정보

```
파일명: GT_N24987L02_260107_091837.txt
        └─현장  └─날짜  └─시간

크기: 1,036 bytes (ASCII)
변환 후: 518 bytes (Binary)
인코딩: Hex-String
주요 마커: E9, EA
레코드: 5 ~ 20개
```

#### 파일 구조

```
┌─────────────────────────────────────────┐
│ 파일 타임스탬프 (6 bytes)               │
├─────────────────────────────────────────┤
│ 헤더 (2 bytes)                          │
├─────────────────────────────────────────┤
│ 레코드 데이터 (510 bytes)               │
│ - 5~20개 레코드만                       │
│                                         │
│ ConfigDone 없음                         │
│ 인덱스 테이블 없음                      │
└─────────────────────────────────────────┘
```

#### Hex-String 인코딩

**원본 파일 (메모장으로 열면):**

```
260107090738000A07EA010709071E1212...

→ 숫자와 영문자만 (0-9, A-F)
```

**변환 과정:**

```
ASCII: "26 01 07 09..."
       ↓
2 chars = 1 byte
"26" → 0x26
"01" → 0x01
       ↓
Binary: 26 01 07 09...

크기: 1,036 chars → 518 bytes (절반)
```

#### 파일 타임스탬프

```
ASCII: "260107090738"
Binary: 26 01 07 09 07 38

해석:
26 → 2026년
01 → 1월
07 → 7일
09 → 9시
07 → 7분
38 → 56초

결과: 2026-01-07 09:07:56
```

#### 레코드 데이터

```
ASCII: "07EA010709071E1212..."
Binary: 07 EA 01 07 09 07 1E 12 12...

레코드 구조:
[07] [마커] [타임스탬프] [데이터]
 1B    1B      6 bytes     가변

예시:
07 EA 01 07 09 07 1E 12 12 [데이터...]
│  │  └──────┬──────┘
│  │      2001-07-09 07:30:18
│  └─ EA 마커
└─── 고정값

차이점: 레코드 타입 바이트 없음
```

---

### 2. WB 온라인

#### 기본 정보

```
파일명: WB_N22893L01_250515_104950.txt
크기: 1,036 bytes (ASCII)
변환 후: 518 bytes (Binary)
인코딩: Hex-String
주요 마커: E7, E9, EB
레코드: 5 ~ 20개
```

#### 구조

```
GT 온라인과 100% 동일

차이점:
- 파일명: WB_ (GT_ 대신)
- 마커: E7, E9, EB
```

---

### 온라인 공통 특징

#### Hex-String 인코딩

```
특징:
- 메모장으로 읽을 수 있음
- 0-9, A-F만 사용
- 2배 크기 (2 chars = 1 byte)
- 디버깅 용이

장점:
✓ 전송 오류 쉽게 발견
✓ 육안 검증 가능
✓ 텍스트 도구 사용

단점:
✗ 2배 크기
✗ 변환 필요
```

#### 단순한 구조

```
포함:
✓ 파일 타임스탬프
✓ 레코드만

제외:
✗ ConfigDone
✗ 시스템 식별자
✗ 인덱스 테이블

목적: 실시간 전송 최적화
```

---

## 핵심 차이점

### 1. 크기 비교

| 타입 | 크기 | 레코드 | 기간 |
|:---|:---|:---|:---|
| WBVF | 256 KB | 1,500+ | 수개월 |
| GT | 512 KB | 3,000+ | 수년 |
| 온라인 | 1 KB | 5-20 | 수분 |

```
크기 비율: 512 KB : 1 KB = 512 : 1
```

### 2. 인코딩 비교

#### 오프라인 (Binary)

```
장점:
✓ 효율적 (1B = 1B)
✓ 빠른 처리
✓ 대용량 적합

단점:
✗ 사람이 못 읽음
✗ 메모장에서 깨짐

예시:
43 6F 6E 66 → 바로 사용
```

#### 온라인 (Hex-String)

```
장점:
✓ 사람이 읽을 수 있음
✓ 디버깅 쉬움

단점:
✗ 2배 크기
✗ 변환 필요

예시:
"43 6F" → 0x43 0x6F 변환 필요
```

### 3. 구조 비교

#### 오프라인

```
완전한 구조:
┌─────────────┐
│ ConfigDone  │ ✓
├─────────────┤
│ WBVF/GSP    │ ✓
├─────────────┤
│ 설정 데이터 │ ✓
├─────────────┤
│ 인덱스      │ ✓
├─────────────┤
│ 레코드      │ ✓
└─────────────┘
```

#### 온라인

```
최소 구조:
┌─────────────┐
│ 타임스탬프  │ ✓
├─────────────┤
│ 레코드만    │ ✓
└─────────────┘
```

### 4. 레코드 형식

#### 오프라인

```
[레코드타입][07][마커][타임스탬프][데이터]
    1B       1B   1B      6B        가변

예시:
01 07 E6 04 0C 0E 16 35 06 [40 bytes]
```

#### 온라인

```
[07][마커][타임스탬프][데이터]
 1B   1B      6B        가변

예시:
07 EA 01 07 09 07 1E 12 12 [20 bytes]

차이: 레코드 타입 없음
```

### 5. 마커 사용

| 시스템 | 주 마커 | 보조 마커 |
|:---|:---|:---|
| WBVF | E6 | E4, E5, E7 |
| GT | E7, E8 | E9 |
| GT 온라인 | EA | E9 |
| WB 온라인 | E9, EB | E7 |

---

## 요약

### 전체 비교표

| 구분 | WBVF | Fault_GT | 온라인 |
|:---|:---|:---|:---|
| 크기 | 256 KB | 512 KB | 1 KB |
| 인코딩 | Binary | Binary | Hex-String |
| 헤더 | ConfigDone + WBVF | ConfigDone + GSP | 타임스탬프만 |
| 인덱스 | 62개 | 125개 | 없음 |
| 레코드 | 1,500~3,500 | 3,000~4,500 | 5~20 |
| 마커 | E6 | E7, E8 | EA / E9, EB |
| 세대 | 구형 | 신형 | 최신 |

### 구별 방법

**파일명으로:**

```
Fault_WBVF_* → 오프라인 구형
Fault_GT_*   → 오프라인 신형
GT_*         → 온라인 GT
WB_*         → 온라인 WB
```

**크기로:**

```
256 KB → WBVF
512 KB → GT
1 KB   → 온라인
```

**메모장으로:**

```
깨진 문자 → 오프라인 (Binary)
0-9, A-F → 온라인 (Hex-String)
```

---

